<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<title>City Earth</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body { margin:0; padding:0; overflow:hidden; background:#000; font-family:Arial }
#ui {
  position:absolute; top:10px; left:10px; z-index:10;
  background:rgba(0,0,0,0.55); color:#fff; padding:10px;
  border-radius:10px; width:220px;
}
button {
  width:100%; margin-top:6px; padding:8px;
  background:#1fa34a; border:none; color:#fff;
  border-radius:6px; font-size:14px;
}
#money { font-size:18px; margin-bottom:5px }
</style>
</head>
<body>

<div id="ui">
  <div id="money">üí∞ 0</div>
  <button onclick="buildFarm()">üåæ –§–µ—Ä–º–∞ (+1/—Å)</button>
  <button onclick="buildFactory()">üè≠ –ó–∞–≤–æ–¥ (+3/—Å)</button>
  <button onclick="toggleTime()">üåó –î–µ–Ω—å / –ù—ñ—á</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
let scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x88ccee, 40, 120);

let camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 500);
camera.position.set(0,25,35);

let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setClearColor(0x87ceeb);
document.body.appendChild(renderer.domElement);

// —Å–≤—ñ—Ç–ª–æ
let sun = new THREE.DirectionalLight(0xffffff, 1);
sun.position.set(50,100,20);
scene.add(sun);
scene.add(new THREE.AmbientLight(0x888888));

// –∑–µ–º–ª—è (—Ç—Ä–∞–≤–∞)
let ground = new THREE.Mesh(
  new THREE.PlaneGeometry(200,200,32,32),
  new THREE.MeshLambertMaterial({color:0x2e8b57})
);
ground.rotation.x = -Math.PI/2;
scene.add(ground);

// –æ–∑–µ—Ä–æ
let water = new THREE.Mesh(
  new THREE.CircleGeometry(12,32),
  new THREE.MeshPhongMaterial({color:0x1e90ff})
);
water.rotation.x = -Math.PI/2;
water.position.set(15,0.1,-10);
scene.add(water);

// –¥–µ—Ä–µ–≤–∞
function tree(x,z){
  let trunk = new THREE.Mesh(
    new THREE.CylinderGeometry(0.3,0.4,3),
    new THREE.MeshLambertMaterial({color:0x8b4513})
  );
  trunk.position.set(x,1.5,z);
  let crown = new THREE.Mesh(
    new THREE.SphereGeometry(1.5,8,8),
    new THREE.MeshLambertMaterial({color:0x228b22})
  );
  crown.position.set(x,4,z);
  scene.add(trunk,crown);
}
for(let i=0;i<25;i++) tree(Math.random()*60-30,Math.random()*60-30);

// –µ–∫–æ–Ω–æ–º—ñ–∫–∞
let money = 0;
let income = 0;
setInterval(()=>{
  money += income;
  document.getElementById("money").innerText = "üí∞ " + money;
},1000);

// –±—É–¥—ñ–≤–ª—ñ
function buildFarm(){
  let farm = new THREE.Mesh(
    new THREE.BoxGeometry(4,2,4),
    new THREE.MeshLambertMaterial({color:0xdeb887})
  );
  farm.position.set(Math.random()*20-10,1,Math.random()*20-10);
  scene.add(farm);
  income += 1;
}
function buildFactory(){
  let fac = new THREE.Mesh(
    new THREE.BoxGeometry(5,4,5),
    new THREE.MeshLambertMaterial({color:0x777777})
  );
  fac.position.set(Math.random()*20-10,2,Math.random()*20-10);
  scene.add(fac);
  income += 3;
}

// –¥–µ–Ω—å / –Ω—ñ—á
let night = false;
function toggleTime(){
  night = !night;
  renderer.setClearColor(night ? 0x050510 : 0x87ceeb);
  sun.intensity = night ? 0.2 : 1;
}

// —Ä—É—Ö –∫–∞–º–µ—Ä–∏
let t=0;
function animate(){
  requestAnimationFrame(animate);
  t+=0.002;
  camera.position.x = Math.sin(t)*40;
  camera.position.z = Math.cos(t)*40;
  camera.lookAt(0,0,0);
  renderer.render(scene,camera);
}
animate();

window.onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
