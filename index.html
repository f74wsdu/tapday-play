<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>City Idle 2026</title>
<style>
:root{
 --bg:#0b1220;--panel:#111a2e;--card:#16213e;--accent:#ffb703;--muted:#8aa0ff;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui;background:var(--bg);color:#fff}
#top{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:var(--panel);position:sticky;top:0;z-index:10}
#money{font-weight:800}
#map{height:calc(100vh - 180px);overflow:auto;padding:14px}
.row{display:flex;gap:12px}
.district{min-width:260px;background:var(--card);border-radius:16px;padding:12px}
.district.locked{opacity:.4}
h2{margin:0 0 8px}
.biz{background:#1f2b4f;border-radius:12px;padding:10px;margin-top:8px;display:flex;justify-content:space-between;align-items:center}
.biz button{background:var(--accent);border:none;border-radius:10px;padding:6px 10px;font-weight:700;cursor:pointer}
.biz small{opacity:.7}
#tap{position:fixed;bottom:86px;left:50%;transform:translateX(-50%);width:96px;height:96px;border-radius:50%;
background:radial-gradient(circle,#ffd36a,#ff9f1a);display:flex;align-items:center;justify-content:center;font-size:26px;
box-shadow:0 0 30px rgba(255,190,60,.6)}
#bottom{position:fixed;bottom:0;width:100%;background:var(--panel);display:flex;justify-content:space-around;padding:8px 0}
.btn{text-align:center;font-size:12px;cursor:pointer}
.btn b{display:block}
#side{position:fixed;right:10px;top:64px;display:flex;flex-direction:column;gap:8px}
.pill{background:#1f2b4f;border-radius:999px;padding:6px 10px;font-size:12px}
.toast{position:fixed;left:50%;bottom:200px;transform:translateX(-50%);background:#000a;padding:10px 14px;border-radius:12px}
</style>
</head>
<body>

<div id="top">
  <div>üíµ <span id="money">0</span></div>
  <div>‚≠ê –†—ñ–≤–µ–Ω—å <span id="lvl">1</span></div>
</div>

<div id="map">
  <div class="row">
    <div class="district" id="d_farm">
      <h2>üåæ –°–µ–ª–æ</h2>
      <div class="biz">
        <div>–§–µ—Ä–º–∞ Lv.<span id="farmLv">0</span><br><small>+<span id="farmInc">1</span>/—Å</small></div>
        <button onclick="buyFarm()">–ö—É–ø–∏—Ç–∏</button>
      </div>
      <div class="biz">
        <div>–ê–ø–≥—Ä–µ–π–¥<br><small>x1.5 –¥–æ—Ö—ñ–¥</small></div>
        <button onclick="upFarm()">‚Üë</button>
      </div>
    </div>

    <div class="district locked" id="d_city">
      <h2>üèô –ú—ñ—Å—Ç–æ</h2>
      <div class="biz">
        <div>–ú–∞–≥–∞–∑–∏–Ω Lv.<span id="shopLv">0</span><br><small>+<span id="shopInc">4</span>/—Å</small></div>
        <button onclick="buyShop()">–ö—É–ø–∏—Ç–∏</button>
      </div>
      <div class="biz">
        <div>–ê–ø–≥—Ä–µ–π–¥</div>
        <button onclick="upShop()">‚Üë</button>
      </div>
    </div>

    <div class="district locked" id="d_ind">
      <h2>üè≠ –Ü–Ω–¥—É—Å—Ç—Ä—ñ—è</h2>
      <div class="biz">
        <div>–ó–∞–≤–æ–¥ Lv.<span id="facLv">0</span><br><small>+<span id="facInc">12</span>/—Å</small></div>
        <button onclick="buyFac()">–ö—É–ø–∏—Ç–∏</button>
      </div>
      <div class="biz">
        <div>–ê–ø–≥—Ä–µ–π–¥</div>
        <button onclick="upFac()">‚Üë</button>
      </div>
    </div>
  </div>
</div>

<div id="tap">ü™ô</div>

<div id="side">
  <div class="pill">üéØ –ö–≤–µ—Å—Ç: <span id="quest">–ó–∞—Ä–æ–±–∏ 500</span></div>
  <div class="pill">üèÜ –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è: <span id="ach">‚Äî</span></div>
</div>

<div id="bottom">
  <div class="btn" onclick="boost()">‚ö°<b>2x (10—Ö–≤)</b></div>
  <div class="btn" onclick="subscribe()">üíé<b>–ü—ñ–¥–ø–∏—Å–∫–∞</b></div>
  <div class="btn" onclick="toggleSound()">üîä<b>–ó–≤—É–∫</b></div>
</div>

<script>
/* ===== STATE ===== */
let S=JSON.parse(localStorage.getItem('city26')||'{}');
let money=S.money||200, lvl=S.lvl||1, sound=S.sound??true;
let inc=S.inc||0;
let farm={lv:S.farmLv||0, inc:S.farmInc||1};
let shop={lv:S.shopLv||0, inc:S.shopInc||4};
let fac ={lv:S.facLv ||0, inc:S.facInc ||12};
let boostUntil=S.boostUntil||0;
let quest=S.quest||{t:'earn',goal:500,done:false};
let ach=S.ach||{};
const sndClick=new Audio('https://assets.mixkit.co/sfx/preview/mixkit-arcade-coin-216.wav');
const sndBuy=new Audio('https://assets.mixkit.co/sfx/preview/mixkit-game-click-1114.wav');

/* ===== HELPERS ===== */
function play(a){if(!sound)return;a.volume=.2;a.currentTime=0;a.play();}
function save(){
 localStorage.setItem('city26',JSON.stringify({
  money,lvl,inc,sound,boostUntil,quest,ach,
  farmLv:farm.lv,farmInc:farm.inc,
  shopLv:shop.lv,shopInc:shop.inc,
  facLv:fac.lv,facInc:fac.inc
 }));
}
function ui(){
 document.getElementById('money').textContent=Math.floor(money);
 document.getElementById('lvl').textContent=lvl;
 document.getElementById('farmLv').textContent=farm.lv;
 document.getElementById('farmInc').textContent=farm.inc;
 document.getElementById('shopLv').textContent=shop.lv;
 document.getElementById('shopInc').textContent=shop.inc;
 document.getElementById('facLv').textContent=fac.lv;
 document.getElementById('facInc').textContent=fac.inc;
 document.getElementById('quest').textContent=quest.done?'–í–∏–∫–æ–Ω–∞–Ω–æ':`–ó–∞—Ä–æ–±–∏ ${quest.goal}`;
 if(lvl>=3) document.getElementById('d_city').classList.remove('locked');
 if(lvl>=6) document.getElementById('d_ind').classList.remove('locked');
}

/* ===== ECONOMY ===== */
function recalc(){
 inc = farm.lv*farm.inc + shop.lv*shop.inc + fac.lv*fac.inc;
}
setInterval(()=>{
 let mult=Date.now()<boostUntil?2:1;
 money+=inc*mult;
 progress();
 ui(); save();
},1000);

/* ===== TAP ===== */
document.getElementById('tap').addEventListener('pointerdown',()=>{
 money+= (Date.now()<boostUntil?2:1);
 play(sndClick);
 progress();
 ui(); save();
});

/* ===== BUY / UP ===== */
function buyFarm(){ if(money<50) return; money-=50; farm.lv++; play(sndBuy); recalc(); ui(); save(); }
function upFarm(){ if(money<100||farm.lv<1) return; money-=100; farm.inc=Math.ceil(farm.inc*1.5); play(sndBuy); recalc(); ui(); save(); }

function buyShop(){ if(money<300||lvl<3) return; money-=300; shop.lv++; play(sndBuy); recalc(); ui(); save(); }
function upShop(){ if(money<600||shop.lv<1) return; money-=600; shop.inc=Math.ceil(shop.inc*1.5); play(sndBuy); recalc(); ui(); save(); }

function buyFac(){ if(money<1200||lvl<6) return; money-=1200; fac.lv++; play(sndBuy); recalc(); ui(); save(); }
function upFac(){ if(money<2400||fac.lv<1) return; money-=2400; fac.inc=Math.ceil(fac.inc*1.5); play(sndBuy); recalc(); ui(); save(); }

/* ===== PROGRESSION ===== */
function progress(){
 if(!quest.done && money>=quest.goal){
  quest.done=true; money+=200; toast('üéØ –ö–≤–µ—Å—Ç –≤–∏–∫–æ–Ω–∞–Ω–æ +200');
 }
 let newLvl = Math.floor(Math.log10(Math.max(10,money)));
 if(newLvl>lvl){ lvl=newLvl; toast('‚≠ê –†—ñ–≤–µ–Ω—å '+lvl); }
 if(money>=1000 && !ach.k1){ ach.k1=1; toast('üèÜ 1K!'); }
 if(money>=10000 && !ach.k10){ ach.k10=1; toast('üèÜ 10K!'); }
}
function toast(t){
 let d=document.createElement('div'); d.className='toast'; d.textContent=t;
 document.body.appendChild(d); setTimeout(()=>d.remove(),1400);
}

/* ===== MONETIZATION (SAFE) ===== */
function boost(){
 boostUntil=Date.now()+10*60*1000;
 toast('‚ö° 2x –Ω–∞ 10 —Ö–≤');
 save();
}
function subscribe(){
 // –ë–µ–∑ –æ–±–º–∞–Ω—É: –¥–æ–±—Ä–æ–≤—ñ–ª—å–Ω–∞ –ø—ñ–¥–ø–∏—Å–∫–∞/–±—É—Å—Ç
 window.open('https://t.me/','_blank');
 toast('üíé –î—è–∫—É—î–º–æ –∑–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É!');
}

/* ===== SOUND ===== */
function toggleSound(){ sound=!sound; save(); }

/* INIT */
recalc(); ui(); save();
</script>
</body>
</html>
