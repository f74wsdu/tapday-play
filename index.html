<script>
const CHANNEL="https://t.me/tapday_clicker";

let balance = +localStorage.balance || 0;
let coins   = +localStorage.coins || 0;
let mult    = +localStorage.mult || 1;

const balanceEl = document.getElementById("balance");
const coinsEl   = document.getElementById("coins");
const subBtn    = document.querySelector(".block[onclick='subscribe()']");

function update(){
  balanceEl.innerText = `ðŸ’° Balance: ${balance.toFixed(2)} $`;
  coinsEl.innerText   = `ðŸª™ Coins: ${coins}`;
  localStorage.balance = balance;
  localStorage.coins   = coins;
  localStorage.mult    = mult;
}
update();

// TAP
coin.onclick = () => {
  navigator.vibrate(20);
  balance += 0.01 * mult;
  update();
};

x2.onclick = () => mult = 2;
x5.onclick = () => mult = 5;

// ===== SUBSCRIBE 10$ =====
if(localStorage.subscribed && subBtn){
  subBtn.style.display = "none";
}

function subscribe(){
  if(localStorage.subscribed) return;
  window.open(CHANNEL, "_blank");
  balance += 10;
  localStorage.subscribed = "1";
  if(subBtn) subBtn.style.display = "none";
  update();
}

// ===== COIN SHOP =====
function openShop(){
  shopModal.style.display = "flex";
}
function closeShop(){
  shopModal.style.display = "none";
}

function buy(cost, m){
  if(coins < cost){
    alert("ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð½ÑŒÐ¾ coins");
    return;
  }
  coins -= cost;
  mult = m;
  update();
}

// ===== WITHDRAW =====
function withdraw(){
  alert("Ð’Ð¸Ð²Ñ–Ð´ Ð±ÑƒÐ´Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ Ð¿Ñ–ÑÐ»Ñ 500 $");
}

// ===== SHARE =====
function share(){
  navigator.clipboard.writeText(location.href);
  alert("ÐŸÐ¾ÑÐ¸Ð»Ð°Ð½Ð½Ñ ÑÐºÐ¾Ð¿Ñ–Ð¹Ð¾Ð²Ð°Ð½Ð¾");
}

// ===== AD =====
function showRewardedAd(){
  coins += 20;
  update();
}
</script>
