<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TapDay</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  background:radial-gradient(circle at top,#1a2a6c,#050812);
  font-family:system-ui,Arial;
  color:#fff;
  overflow:hidden;
  text-align:center;
  user-select:none;
}

/* HEADER */
.header{
  width:92%;
  max-width:420px;
  margin:16px auto;
  padding:16px;
  border-radius:20px;
  background:linear-gradient(180deg,rgba(0,0,0,.6),rgba(0,0,0,.8));
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}
.balance{
  font-size:44px;
  font-weight:900;
  text-shadow:0 0 18px gold;
}
.meta{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin-top:8px;
}

/* TAP COIN */
.stage{
  height:55vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.tap{
  width:260px;
  height:260px;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 25%, #fff6c7, #ffcc55 40%, #e6a800 75%);
  box-shadow:
    inset 0 -12px 22px rgba(0,0,0,.35),
    0 0 90px rgba(255,200,0,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  font-weight:900;
  color:#3a2600;
  animation:pulse 2.2s infinite;
  touch-action:manipulation;
}
.tap:active{transform:scale(.93)}
@keyframes pulse{
  0%{box-shadow:0 0 40px rgba(255,180,0,.6)}
  50%{box-shadow:0 0 110px rgba(255,220,120,1)}
  100%{box-shadow:0 0 40px rgba(255,180,0,.6)}
}

/* SIDE BUTTONS */
.side{
  position:fixed;
  right:12px;
  top:40%;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.side button{
  width:72px;
  height:72px;
  border-radius:18px;
  border:none;
  font-size:18px;
  font-weight:800;
  box-shadow:0 10px 26px rgba(0,0,0,.5);
}
.blue{background:#2d8cff;color:#fff}
.gold{background:linear-gradient(145deg,#ffe08a,#ffb300);color:#3b2400}

/* COINS EFFECT */
.coin{
  position:absolute;
  font-size:32px;
  animation:fly 900ms ease-out forwards;
  pointer-events:none;
}
@keyframes fly{
  from{opacity:1;transform:translate(0,0) scale(1)}
  to{opacity:0;transform:translate(var(--x),var(--y)) scale(.7)}
}
</style>
</head>

<body>

<div class="header">
  <div class="balance" id="coins">0 üí∞</div>
  <div class="meta">
    <div>üîì –†—ñ–≤–µ–Ω—å: <b id="lvl">1</b></div>
    <div>üéØ –¶—ñ–ª—å: <b id="goal">1 000</b></div>
    <div>‚è≥ <span id="time">24:00:00</span></div>
  </div>
</div>

<div class="stage">
  <div class="tap" id="tap">TAP</div>
</div>

<div class="side">
  <button class="blue" id="x2">‚ö°x2</button>
  <button class="blue" id="auto">ü§ñ</button>
  <button class="gold" id="bonus">üéÅ</button>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

let coins=0, mult=1, auto=false;

const levels=[
  0,1000,3000,7000,15000,30000,60000,120000,250000,500000
];

function level(){
  let l=1;
  for(let i=1;i<levels.length;i++){
    if(coins>=levels[i]) l=i+1;
  }
  return l;
}

function nextGoal(){
  return levels[level()] ?? levels[levels.length-1];
}

function update(){
  coinsEl.textContent=coins+" üí∞";
  lvlEl.textContent=level();
  goalEl.textContent=nextGoal().toLocaleString();
}

const coinsEl=document.getElementById("coins");
const lvlEl=document.getElementById("lvl");
const goalEl=document.getElementById("goal");
const tap=document.getElementById("tap");

tap.addEventListener("pointerdown",e=>{
  coins+=mult;
  update();
  for(let i=0;i<4;i++)spawn(e.clientX,e.clientY);
});

function spawn(x,y){
  const c=document.createElement("div");
  c.className="coin";
  c.textContent="üí∞";
  c.style.left=x+"px";
  c.style.top=y+"px";
  c.style.setProperty("--x",(Math.random()*200-100)+"px");
  c.style.setProperty("--y",(-Math.random()*180-60)+"px");
  document.body.appendChild(c);
  setTimeout(()=>c.remove(),900);
}

x2.onclick=()=>{
  if(mult===2||coins<100) return;
  coins-=100; mult=2; update();
};

auto.onclick=()=>{
  if(auto||coins<300) return;
  coins-=300; auto=true; update();
};

setInterval(()=>{if(auto){coins+=mult;update();}},700);

bonus.onclick=()=>{
  const reward=level()*1000;
  coins+=reward;
  update();
  alert("üéÅ –ë–æ–Ω—É—Å: +"+reward);
};

/* TIMER */
let sec=86400;
setInterval(()=>{
  sec--;
  const h=String(Math.floor(sec/3600)).padStart(2,"0");
  const m=String(Math.floor(sec%3600/60)).padStart(2,"0");
  const s=String(sec%60).padStart(2,"0");
  time.textContent=`${h}:${m}:${s}`;
},1000);

update();
</script>
</body>
</html>
