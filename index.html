<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>TapDay World â€“ Living Map</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<style>
html,body{margin:0;overflow:hidden;background:#000;font-family:system-ui;color:#fff}
#ui{
position:fixed;top:10px;left:10px;right:10px;
display:flex;justify-content:space-between;z-index:10
}
.badge{
background:rgba(0,0,0,.55);
backdrop-filter:blur(6px);
padding:10px 14px;border-radius:14px
}
canvas{display:block}
</style>
</head>

<body>

<div id="ui">
<div class="badge">ğŸ’° <span id="money">1500</span></div>
<div class="badge">ğŸŒ— <span id="time">Ğ”ĞµĞ½ÑŒ</span></div>
<div class="badge">ğŸŒ TapDay World</div>
</div>

<canvas id="map"></canvas>

<script>
const c=document.getElementById("map");
const ctx=c.getContext("2d");
resize();window.onresize=resize;

let cam={x:0,y:0,z:1};
let money=1500;
let time=0;

// terrain map
const tiles=[];
const SIZE=80;
for(let x=-SIZE;x<SIZE;x++){
for(let y=-SIZE;y<SIZE;y++){
let r=Math.random();
tiles.push({
x,y,
type:r<0.08?"water":r<0.15?"forest":"grass"
});
}
}

// birds
const birds=Array.from({length:8},()=>({
x:Math.random()*800-400,
y:Math.random()*800-400,
vx:Math.random()*0.4+0.2
}));

function draw(){
ctx.clearRect(0,0,c.width,c.height);

// day/night
time+=0.0004;
const day=Math.sin(time)*0.5+0.5;

// sky overlay
ctx.fillStyle=`rgba(5,10,20,${0.6-day*0.5})`;
ctx.fillRect(0,0,c.width,c.height);

ctx.save();
ctx.translate(c.width/2+cam.x,c.height/2+cam.y);
ctx.scale(cam.z,cam.z);

// draw terrain
for(const t of tiles){
let color="#3a7d3a";
if(t.type==="water") color="#1c4fa1";
if(t.type==="forest") color="#245c2a";
ctx.fillStyle=color;
ctx.fillRect(t.x*32,t.y*32,32,32);
}

// trees
for(const t of tiles){
if(t.type==="forest"){
ctx.beginPath();
ctx.arc(t.x*32+16,t.y*32+16,8,0,Math.PI*2);
ctx.fillStyle="#1e3f1e";
ctx.fill();
}
}

// birds
ctx.fillStyle="#fff";
for(const b of birds){
b.x+=b.vx;
if(b.x>500) b.x=-500;
ctx.beginPath();
ctx.arc(b.x,b.y,3,0,Math.PI*2);
ctx.fill();
}

// fog
ctx.fillStyle="rgba(200,200,200,0.05)";
ctx.fillRect(-2000,-2000,4000,4000);

ctx.restore();

// UI
document.getElementById("time").textContent=day>0.5?"Ğ”ĞµĞ½ÑŒ":"ĞÑ–Ñ‡";

requestAnimationFrame(draw);
}
draw();

// camera
let d=false,lx,ly;
c.onpointerdown=e=>{d=true;lx=e.clientX;ly=e.clientY;}
c.onpointerup=()=>d=false;
c.onpointermove=e=>{
if(d){
cam.x+=e.clientX-lx;
cam.y+=e.clientY-ly;
lx=e.clientX;ly=e.clientY;
}
};
c.onwheel=e=>{
cam.z+=e.deltaY*-0.001;
cam.z=Math.max(.6,Math.min(1.5,cam.z));
};

function resize(){
c.width=innerWidth;
c.height=innerHeight;
}
</script>

</body>
</html>
