<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TapCity 2026</title>

<style>
html,body{margin:0;padding:0;overflow:hidden;background:#0b1320;color:#fff;font-family:system-ui}
#top{position:absolute;top:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.6);padding:10px 18px;border-radius:14px;display:flex;gap:16px}
.stat{font-weight:700}
#ui{position:absolute;bottom:14px;width:100%;display:flex;justify-content:space-around}
.btn{background:linear-gradient(135deg,#ffd54f,#ffb300);color:#000;padding:12px 16px;border-radius:16px;font-weight:800}
#tapCoin{position:absolute;bottom:110px;left:50%;transform:translateX(-50%);width:130px;height:130px;border-radius:50%;
background:radial-gradient(circle at 30% 30%,#fffde7,#fbc02d);
box-shadow:0 0 40px rgba(255,215,0,.8);display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:900;color:#5d4037}
#tapCoin:active{transform:translateX(-50%) scale(.94)}
.float{position:absolute;color:gold;font-weight:900;pointer-events:none;animation:up 1s ease-out forwards}
@keyframes up{0%{opacity:1}100%{opacity:0;transform:translateY(-60px)}}
canvas{width:100%;height:100%}
</style>
</head>

<body>
<canvas id="map"></canvas>

<div id="top">
  <div class="stat">üí∞ <span id="money">0</span></div>
  <div class="stat">‚≠ê <span id="level">1</span></div>
  <div class="stat">üìÖ –î–µ–Ω—å <span id="day">1</span></div>
</div>

<div id="tapCoin">TAP</div>

<div id="ui">
  <div class="btn" onclick="buyFarm()">üåæ –§–µ—Ä–º–∞</div>
  <div class="btn" onclick="buyFactory()">üè≠ –ó–∞–≤–æ–¥</div>
  <div class="btn" onclick="openBonus()">üéÅ –ë–æ–Ω—É—Å</div>
</div>

<audio id="click">
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_5c2c8a7a2c.mp3">
</audio>

<script>
const c=document.getElementById("map"),x=c.getContext("2d");
function r(){c.width=innerWidth;c.height=innerHeight}r();onresize=r;

let money=100,level=1,income=0,day=1,time=0,seasonDay=1;
const moneyEl=money=document.getElementById("money");
const levelEl=document.getElementById("level");
const dayEl=document.getElementById("day");
const snd=document.getElementById("click");

const buildings=[],people=[],cars=[];

// TAP
tapCoin.onclick=e=>{
 money+=1+level;
 snd.currentTime=0;snd.volume=.15;snd.play();
 float("+"+(1+level),e.clientX,e.clientY);
 if(money>level*200){level++;money+=100}
};

// BUSINESSES
function buyFarm(){
 if(money<200)return;
 money-=200;income+=2;
 buildings.push({t:"farm",x:50+Math.random()*200,y:300+Math.random()*150});
}
function buyFactory(){
 if(money<800)return;
 money-=800;income+=6;
 buildings.push({t:"factory",x:350+Math.random()*200,y:300+Math.random()*150});
}

// BONUS
function openBonus(){
 window.open("https://t.me/tapday_clicker","_blank");
 money+=5000;
}

// FLOAT
function float(t,xp,yp){
 const d=document.createElement("div");
 d.className="float";d.textContent=t;
 d.style.left=xp+"px";d.style.top=yp+"px";
 document.body.appendChild(d);
 setTimeout(()=>d.remove(),900);
}

// PEOPLE & CARS
for(let i=0;i<10;i++)people.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,v:0.3+Math.random()});
for(let i=0;i<6;i++)cars.push({x:Math.random()*innerWidth,y:innerHeight*0.65+Math.random()*40,v:1+Math.random()});

// LOOP
setInterval(()=>{
 money+=income;
 time++;
 if(time%20==0){day++;seasonDay++;if(seasonDay>7)seasonDay=1}
},1000);

// DRAW
function draw(){
 // day/night
 const night=Math.sin(time/50)*0.5+0.5;
 x.fillStyle=`rgba(20,40,20,1)`;x.fillRect(0,0,c.width,c.height);
 x.fillStyle="#1b5e20";x.fillRect(0,c.height*0.55,c.width,c.height);
 x.fillStyle="#1565c0";x.fillRect(0,c.height*0.75,c.width,c.height);

 // roads
 x.fillStyle="#555";x.fillRect(0,c.height*0.65,c.width,40);

 // buildings
 buildings.forEach(b=>{
  x.fillStyle=b.t=="farm"?"#8bc34a":"#90a4ae";
  x.fillRect(b.x,b.y,28,28);
 });

 // people
 people.forEach(p=>{
  p.x+=p.v*(Math.random()>.5?1:-1);
  p.y+=p.v*(Math.random()>.5?1:-1);
  x.fillStyle="#ffccbc";x.fillRect(p.x,p.y,4,4);
 });

 // cars
 cars.forEach(car=>{
  car.x+=car.v;if(car.x>c.width)car.x=0;
  x.fillStyle="#f44336";x.fillRect(car.x,car.y,14,6);
 });

 // night overlay
 x.fillStyle=`rgba(0,0,40,${night*0.4})`;
 x.fillRect(0,0,c.width,c.height);

 moneyEl.textContent=Math.floor(money);
 levelEl.textContent=level;
 dayEl.textContent=day;

 requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>
