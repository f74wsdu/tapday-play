<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>City Empire</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0;
  background:#0b1020;
  color:#fff;
  font-family:system-ui;
}
#top {
  display:flex;
  justify-content:space-around;
  padding:10px;
  background:#020617;
}
.stat { font-weight:600 }
canvas {
  display:block;
  margin:auto;
}
#ui {
  position:fixed;
  bottom:0;
  width:100%;
  background:#020617;
  display:flex;
  justify-content:space-around;
  padding:10px;
}
button {
  background:#2563eb;
  color:#fff;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  font-weight:600;
}
button:active { transform:scale(.96) }
</style>
</head>
<body>

<div id="top">
  <div class="stat">üí∞ <span id="money">500</span></div>
  <div class="stat">üèô <span id="pop">10</span></div>
  <div class="stat">üíµ/–≥–æ–¥ <span id="income">5</span></div>
</div>

<canvas id="map" width="420" height="520"></canvas>

<div id="ui">
  <button onclick="build('farm')">üåæ –§–µ—Ä–º–∞</button>
  <button onclick="build('house')">üè† –ë—É–¥–∏–Ω–æ–∫</button>
  <button onclick="build('factory')">üè≠ –ó–∞–≤–æ–¥</button>
</div>

<audio id="click" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA="></audio>

<script>
const c = document.getElementById("map");
const ctx = c.getContext("2d");
const click = document.getElementById("click");

let money = 500;
let income = 5;
let pop = 10;

const grid = [];
const size = 40;

function iso(x,y){
  return {
    x: 210 + (x-y)*size,
    y: 80 + (x+y)*size/2
  }
}

function drawTile(x,y,color){
  const p = iso(x,y);
  ctx.beginPath();
  ctx.moveTo(p.x, p.y);
  ctx.lineTo(p.x+size, p.y+size/2);
  ctx.lineTo(p.x, p.y+size);
  ctx.lineTo(p.x-size, p.y+size/2);
  ctx.closePath();
  ctx.fillStyle = color;
  ctx.fill();
}

function render(){
  ctx.clearRect(0,0,c.width,c.height);
  for(let x=0;x<6;x++){
    for(let y=0;y<6;y++){
      drawTile(x,y,"#1e293b");
    }
  }
  grid.forEach(b=>{
    drawTile(b.x,b.y,b.color);
  });
}

function build(type){
  const cost = {farm:100,house:150,factory:300}[type];
  if(money < cost) return;

  money -= cost;
  click.play();

  const tile = {
    x: Math.floor(Math.random()*6),
    y: Math.floor(Math.random()*6),
    color: type==="farm" ? "#22c55e" :
           type==="house" ? "#38bdf8" : "#64748b"
  };
  grid.push(tile);

  if(type==="farm") income += 3;
  if(type==="house") pop += 5;
  if(type==="factory") income += 8;

  update();
  render();
}

function update(){
  money = Math.floor(money);
  document.getElementById("money").innerText = money;
  document.getElementById("income").innerText = income;
  document.getElementById("pop").innerText = pop;
}

setInterval(()=>{
  money += income/60;
  update();
},1000);

render();
update();
</script>
</body>
</html>
