<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>City Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{margin:0;overflow:hidden;background:#000;font-family:Arial}
#ui{
position:absolute;top:10px;left:10px;z-index:10;
background:rgba(0,0,0,.6);color:#fff;
padding:10px;border-radius:10px;width:220px
}
button{
width:100%;margin-top:6px;padding:8px;
background:#1fa34a;border:none;color:#fff;
border-radius:6px;font-size:14px
}
</style>
</head>
<body>

<div id="ui">
<div id="money">üí∞ 0</div>
<button onclick="buildFarm()">üåæ –§–µ—Ä–º–∞ (+1/—Å)</button>
<button onclick="buildFactory()">üè≠ –ó–∞–≤–æ–¥ (+3/—Å)</button>
<button onclick="toggleTime()">üåó –î–µ–Ω—å / –ù—ñ—á</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
let scene=new THREE.Scene();
scene.fog=new THREE.Fog(0x88ccee,40,120);

let camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,.1,500);
camera.position.set(0,30,40);

let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setClearColor(0x87ceeb);
document.body.appendChild(renderer.domElement);

// —Å–≤—ñ—Ç–ª–æ
let sun=new THREE.DirectionalLight(0xffffff,1);
sun.position.set(50,100,20);
scene.add(sun);
scene.add(new THREE.AmbientLight(0x888888));

// –∑–µ–º–ª—è
let ground=new THREE.Mesh(
new THREE.PlaneGeometry(200,200),
new THREE.MeshLambertMaterial({color:0x2e8b57})
);
ground.rotation.x=-Math.PI/2;
scene.add(ground);

// –¥–æ—Ä–æ–≥–∞ (–∫–æ–ª–æ)
let road=new THREE.Mesh(
new THREE.RingGeometry(18,22,64),
new THREE.MeshBasicMaterial({color:0x333333})
);
road.rotation.x=-Math.PI/2;
scene.add(road);

// –≤–æ–¥–∞
let water=new THREE.Mesh(
new THREE.CircleGeometry(10,32),
new THREE.MeshPhongMaterial({color:0x1e90ff})
);
water.rotation.x=-Math.PI/2;
water.position.set(15,.1,-10);
scene.add(water);

// –¥–µ—Ä–µ–≤–∞
function tree(x,z){
let t=new THREE.Mesh(
new THREE.CylinderGeometry(.3,.4,3),
new THREE.MeshLambertMaterial({color:0x8b4513})
);
t.position.set(x,1.5,z);
let c=new THREE.Mesh(
new THREE.SphereGeometry(1.5,8,8),
new THREE.MeshLambertMaterial({color:0x228b22})
);
c.position.set(x,4,z);
scene.add(t,c);
}
for(let i=0;i<30;i++)tree(Math.random()*60-30,Math.random()*60-30);

// –µ–∫–æ–Ω–æ–º—ñ–∫–∞
let money=0,income=0;
setInterval(()=>{
money+=income;
moneyEl.innerText="üí∞ "+money;
},1000);
let moneyEl=document.getElementById("money");

function buildFarm(){
let f=new THREE.Mesh(
new THREE.BoxGeometry(4,2,4),
new THREE.MeshLambertMaterial({color:0xdeb887})
);
f.position.set(Math.random()*20-10,1,Math.random()*20-10);
scene.add(f);
income+=1;
}

function buildFactory(){
let f=new THREE.Mesh(
new THREE.BoxGeometry(5,4,5),
new THREE.MeshLambertMaterial({color:0x777777})
);
f.position.set(Math.random()*20-10,2,Math.random()*20-10);
scene.add(f);
income+=3;
}

// üë§ –õ–Æ–î–ò
let people=[];
function spawnPerson(){
let p=new THREE.Mesh(
new THREE.CapsuleGeometry(.4,1.2),
new THREE.MeshLambertMaterial({color:0xffcc99})
);
p.position.set(Math.random()*20-10,1,Math.random()*20-10);
p.userData={dir:Math.random()*Math.PI*2};
scene.add(p);
people.push(p);
}
for(let i=0;i<12;i++)spawnPerson();

// üöó –ú–ê–®–ò–ù–ò
let cars=[];
function spawnCar(){
let c=new THREE.Mesh(
new THREE.BoxGeometry(2,1,1),
new THREE.MeshLambertMaterial({color:0xff0000})
);
c.userData={angle:Math.random()*Math.PI*2,speed:0.01+Math.random()*0.01};
scene.add(c);
cars.push(c);
}
for(let i=0;i<6;i++)spawnCar();

// –¥–µ–Ω—å/–Ω—ñ—á
let night=false;
function toggleTime(){
night=!night;
renderer.setClearColor(night?0x050510:0x87ceeb);
sun.intensity=night?.2:1;
}

// –∞–Ω—ñ–º–∞—Ü—ñ—è
let t=0;
function animate(){
requestAnimationFrame(animate);

// –ª—é–¥–∏ —Ö–æ–¥—è—Ç—å
people.forEach(p=>{
p.position.x+=Math.cos(p.userData.dir)*0.03;
p.position.z+=Math.sin(p.userData.dir)*0.03;
if(Math.random()<0.01)p.userData.dir=Math.random()*Math.PI*2;
});

// –º–∞—à–∏–Ω–∏ —ó–∑–¥—è—Ç—å
cars.forEach(c=>{
c.userData.angle+=c.userData.speed;
c.position.set(
Math.cos(c.userData.angle)*20,
.5,
Math.sin(c.userData.angle)*20
);
c.rotation.y=-c.userData.angle;
});

// –∫–∞–º–µ—Ä–∞
t+=0.002;
camera.position.x=Math.sin(t)*45;
camera.position.z=Math.cos(t)*45;
camera.lookAt(0,0,0);

renderer.render(scene,camera);
}
animate();

onresize=()=>{
camera.aspect=innerWidth/innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(innerWidth,innerHeight);
};
</script>
</body>
</html>
