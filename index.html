<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>TapDay World 2026</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<style>
html,body{margin:0;background:#020814;color:#fff;font-family:system-ui;overflow:hidden}
#ui{position:fixed;top:10px;left:10px;right:10px;display:flex;justify-content:space-between;z-index:10}
.badge{background:rgba(0,0,0,.6);padding:10px 14px;border-radius:14px}
#panel{
position:fixed;bottom:0;left:0;right:0;
background:linear-gradient(180deg,rgba(0,0,0,.1),rgba(0,0,0,.85));
padding:14px;text-align:center;font-size:14px
}
button{
margin:6px;padding:12px 16px;border:0;border-radius:14px;
background:linear-gradient(135deg,#ffd54f,#ffb300);
font-weight:700
}
canvas{display:block}
</style>
</head>

<body>

<div id="ui">
<div class="badge">üí∞ <span id="money">1500</span></div>
<div class="badge">üåç –°–µ–∑–æ–Ω <span id="season">1</span></div>
<div class="badge">‚è≥ <span id="timer">00:00</span></div>
</div>

<canvas id="world"></canvas>

<div id="panel">
<b>TapDay World</b><br>
–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ —Ä–µ–≥—ñ–æ–Ω
</div>

<audio id="click" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c8a04a4b2.mp3"></audio>
<audio id="bgm" loop src="https://cdn.pixabay.com/download/audio/2023/03/30/audio_2f4c4f99df.mp3"></audio>

<script>
const c=document.getElementById("world");
const ctx=c.getContext("2d");
resize();window.onresize=resize;

let cam={x:0,y:0,z:1};
let money=1500;
let season=1;
let passive=0;

document.getElementById("bgm").volume=0.3;
document.getElementById("bgm").play();

const regions=[
{name:"–§–µ—Ä–º–µ—Ä—Å—å–∫–∏–π –∫—Ä–∞–π",x:-200,y:-100,r:90,icon:"üåæ",income:4},
{name:"–Ü–Ω–¥—É—Å—Ç—Ä—ñ–∞–ª—å–Ω–∏–π –ø–æ—è—Å",x:200,y:-80,r:100,icon:"üè≠",income:12},
{name:"–§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π —Ü–µ–Ω—Ç—Ä",x:0,y:150,r:110,icon:"üè¶",income:20},
{name:"–ü–æ—Ä—Ç–æ–≤–∏–π —Ä–µ–≥—ñ–æ–Ω",x:-180,y:180,r:95,icon:"‚öì",income:8}
];

function draw(){
ctx.clearRect(0,0,c.width,c.height);

// space
const g=ctx.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width);
g.addColorStop(0,"#071833");
g.addColorStop(1,"#000");
ctx.fillStyle=g;
ctx.fillRect(0,0,c.width,c.height);

// planet
ctx.save();
ctx.translate(c.width/2+cam.x,c.height/2+cam.y);
ctx.scale(cam.z,cam.z);

ctx.beginPath();
ctx.arc(0,0,300,0,Math.PI*2);
ctx.fillStyle="#0b3d2e";
ctx.fill();

// regions
for(let r of regions){
ctx.beginPath();
ctx.arc(r.x,r.y,r.r,0,Math.PI*2);
ctx.fillStyle="rgba(0,0,0,.35)";
ctx.fill();
ctx.font="28px serif";
ctx.textAlign="center";
ctx.fillText(r.icon,r.x,r.y+10);
}

ctx.restore();
requestAnimationFrame(draw);
}
draw();

// click
c.onclick=e=>{
const x=(e.clientX-c.width/2-cam.x)/cam.z;
const y=(e.clientY-c.height/2-cam.y)/cam.z;
for(let r of regions){
if(Math.hypot(x-r.x,y-r.y)<r.r){
money+=r.income;
passive+=r.income;
document.getElementById("money").textContent=money;
document.getElementById("panel").innerHTML=
`<b>${r.name}</b><br>+${r.income} üí∞<br><button onclick="upgrade('${r.name}')">–ê–ø–≥—Ä–µ–π–¥</button>`;
document.getElementById("click").play();
}
}
};

// upgrade
function upgrade(name){
const r=regions.find(x=>x.name===name);
if(money>=200){
money-=200;
r.income+=5;
document.getElementById("money").textContent=money;
}
}

// passive income
setInterval(()=>{
money+=passive;
document.getElementById("money").textContent=money;
},1000);

// timer + season
let t=0;
setInterval(()=>{
t++;
document.getElementById("timer").textContent=
String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0");
if(t>=420){ // 7 —Ö–≤ = —Å–µ–∑–æ–Ω (–¥–ª—è —Ç–µ—Å—Ç—É)
season++;
document.getElementById("season").textContent=season;
t=0;
}
},1000);

// drag
let d=false,lx,ly;
c.onpointerdown=e=>{d=true;lx=e.clientX;ly=e.clientY;}
c.onpointerup=()=>d=false;
c.onpointermove=e=>{
if(d){
cam.x+=e.clientX-lx;
cam.y+=e.clientY-ly;
lx=e.clientX;ly=e.clientY;
}
};

// zoom
c.onwheel=e=>{
cam.z+=e.deltaY*-0.001;
cam.z=Math.max(.6,Math.min(1.4,cam.z));
};

function resize(){
c.width=innerWidth;
c.height=innerHeight;
}
</script>

</body>
</html>
