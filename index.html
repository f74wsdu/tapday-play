<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>TapDay World 2026</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<style>
html,body{margin:0;overflow:hidden;background:#0b1a0b;font-family:system-ui;color:#fff}
canvas{display:block}
#ui{
position:fixed;top:10px;left:10px;right:10px;
display:flex;gap:10px;z-index:10
}
.panel{
background:rgba(0,0,0,.55);
backdrop-filter:blur(8px);
padding:10px 14px;border-radius:14px
}
button{
background:#2ecc71;border:0;
padding:8px 12px;border-radius:10px;
color:#000;font-weight:600
}
</style>
</head>
<body>

<div id="ui">
<div class="panel">ğŸ’° <span id="money">1500</span></div>
<div class="panel" id="time">ğŸŒ¤ Ğ”ĞµĞ½ÑŒ</div>
<button onclick="mode='farm'">ğŸŒ¾ Ğ¤ĞµÑ€Ğ¼Ğ°</button>
<button onclick="mode='factory'">ğŸ­ Ğ—Ğ°Ğ²Ğ¾Ğ´</button>
<button onclick="mode='hospital'">ğŸ¥ Ğ›Ñ–ĞºĞ°Ñ€Ğ½Ñ</button>
</div>

<canvas id="c"></canvas>

<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");
resize();addEventListener("resize",resize);

let cam={x:0,y:0,z:1};
let money=1500;
let mode=null;
let t=0;

// buildings
const buildings=[];

// organic terrain
function noise(x,y){
return Math.sin(x*0.01)+Math.cos(y*0.01);
}

function draw(){
ctx.clearRect(0,0,c.width,c.height);
t+=0.001;

const day=Math.sin(t)*0.5+0.5;
document.getElementById("time").textContent=day>0.5?"ğŸŒ¤ Ğ”ĞµĞ½ÑŒ":"ğŸŒ™ ĞÑ–Ñ‡";

ctx.save();
ctx.translate(c.width/2+cam.x,c.height/2+cam.y);
ctx.scale(cam.z,cam.z);

// land
for(let x=-2000;x<2000;x+=40){
for(let y=-2000;y<2000;y+=40){
const n=noise(x,y);
if(n>1){
ctx.fillStyle="#1e6bd6"; // water
}else{
ctx.fillStyle="#2f8f3f"; // grass
}
ctx.fillRect(x,y,40,40);
}
}

// buildings
for(const b of buildings){
ctx.fillStyle=b.type==="farm"?"#c9b458":
b.type==="factory"?"#888":
"#e74c3c";
ctx.fillRect(b.x-15,b.y-15,30,30);
}

// fog
ctx.fillStyle=`rgba(200,200,200,${0.08-day*0.05})`;
ctx.fillRect(-3000,-3000,6000,6000);

ctx.restore();
requestAnimationFrame(draw);
}
draw();

// place buildings
c.onclick=e=>{
if(!mode) return;
const rect=c.getBoundingClientRect();
const x=(e.clientX-rect.width/2-cam.x)/cam.z;
const y=(e.clientY-rect.height/2-cam.y)/cam.z;
buildings.push({x,y,type:mode});
money-=100;
document.getElementById("money").textContent=money;
};

// camera
let drag=false,px,py;
c.onpointerdown=e=>{drag=true;px=e.clientX;py=e.clientY}
c.onpointerup=()=>drag=false;
c.onpointermove=e=>{
if(drag){
cam.x+=e.clientX-px;
cam.y+=e.clientY-py;
px=e.clientX;py=e.clientY;
}
}
c.onwheel=e=>{
cam.z+=e.deltaY*-0.001;
cam.z=Math.max(.6,Math.min(1.6,cam.z));
}

function resize(){
c.width=innerWidth;
c.height=innerHeight;
}
</script>

</body>
</html>
